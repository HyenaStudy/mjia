# CHAPTER 4 스트림 소개

### 스트림
- 선언형 방식으로 데이터를 효율적으로 처리
- 멀티스레드 코드 없이 `parallelStream()`으로 병렬 처리 가능
- 데이터를 읽기만 하며 원본 데이터 변경 X
- 파이프라이닝 : 스트림 연산끼리 연결해서 파이프 라인 구성되도록 스트림 반환
- 내부 반복을 사용해 코드 가독성을 높이고 최적화된 연산 수행  
-> 선언형으로 코드가 간결해지고 병렬 처리로 성능 최적화 가능

**stream을 활용한 선언형 데이터 처리 예**
```java
menu.stream()
  .filter(d -> d.getCalories() < 400)
  .sorted(comparing(Dish::getCalories))
  .map(Dish::getName)
  .collect(toList());
```
<br><br>

### 컬렉션 vs 스트림
#### 1. 계산 시점 차이
- 컬렉션
  - 모든 데이터를 미리 계산 후 저장
  - ex) 모든 검색 결과를 한 번에 내려받아 저장
- 스트림
  - 데이터를 요청할 때만 계산
  - ex) 한 페이지만 조회하고 다음 버튼으로 추가 조회

#### 2. 요소 소비
- 컬렉션은 **여러 번** 반복 탐색 가능
- 스트림은 **한 번만** 탐색 가능. 다시 탐색하려면 새로운 스트림 생성

#### 3. 반복 방식
- 컬렉션은 사용자가 for문, for-each문을 직접 사용하는 **외부 반복**
- 스트림은 자동으로 반복 및 병렬 처리하는 **내부 반복**
<br><br>

### 스트림 연산
#### 중간연산
  - 서로 연결되어 파이프라인 구성
  - 스트림을 반환해 연속적인 연산 가능
  - 최종 연산이 호출되기 전까지 실행 X -> 지연 연산
#### 최종연산
  - 스트림을 닫아 최종 결과 반환
  - 반환값은 스트림이 아닌 다른 데이터 유형